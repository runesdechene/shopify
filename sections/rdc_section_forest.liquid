{{ 'rdc_forest.css' | asset_url | stylesheet_tag }}

<div class="forest {{ section.settings.class }}" style="background-color: {{ section.settings.bgcolor }};">
  <div class="frst">
    <img class="img_center" src="{{ section.settings.center_image | img_url: 'master' }}" alt="{{ section.settings.center_image_alt }}"/>
    
    <img class="img_left" src="{{ section.settings.left_image | img_url: 'master' }}" alt="{{ section.settings.left_image_alt }}"/>
    
    <img class="img_right" src="{{ section.settings.right_image | img_url: 'master' }}" alt="{{ section.settings.right_image_alt }}">
  </div>

  <div class="content">
    <h2 style="margin-bottom: 20px;">{{ section.settings.title }}</h2>
    <p>{{ section.settings.description }}</p>
    
    {%- comment -%} Formulaire d'inscription à la newsletter {%- endcomment -%}
    {% if section.settings.show_newsletter %}
    <div class="forest-newsletter" style="margin-top: {{ section.settings.margintop }}px;">
      <h3 class="newsletter-title">{{ section.settings.newsletter_title | default: "Rejoignez notre communauté" }}</h3>
      <p class="newsletter-description">{{ section.settings.newsletter_description }}</p>
      
      {% form 'customer', class: 'newsletter-form' %}
        {% if form.posted_successfully? %}
          <div class="newsletter-success">
            {{ section.settings.success_message | default: "Merci ! Vous êtes inscrit(e) à notre newsletter." }}
          </div>
        {% endif %}
        
        {% if form.errors %}
          <div class="newsletter-error">
            {{ form.errors | default_errors }}
          </div>
        {% endif %}
        
        <div class="newsletter-input-wrapper">
          <input 
            type="email" 
            name="contact[email]" 
            class="newsletter-input"
            placeholder="{{ section.settings.email_placeholder | default: 'Votre adresse e-mail' }}"
            required
            aria-label="Email"
          />
          <button type="submit" class="newsletter-button">
            {{ section.settings.button_text | default: "S'inscrire" }}
          </button>
        </div>
        
        <input type="hidden" name="contact[tags]" value="newsletter">
      {% endform %}
    </div>
    {% endif %}
    
    {% if selection.settings.discord_link != blank %}
    <div style="display: flex; gap: 20px; justify-content: center; margin-top: 30px;">
      <a target="_blank" href="{{ section.settings.discord_link }}">{{ section.settings.discord_text }}</a>
    </div>
    {% endif %}
  </div>
</div>

{% schema %}
{
  "name": "Forêt Immersive",
  "tag": "section", 
  "class": "section",
  "settings": [
    {
      "type": "text",
      "id": "class",
      "label": "Classe personnalisée",
      "info": "Une classe pour s'amuser en CSS en ciblant"
    },
     {
      "type": "color",
      "id": "bgcolor",
      "label": "Couleur de fond",
      "info": "Vide par défaut"
    },
    {
      "type": "image_picker",
      "id": "center_image",
      "label": "Image centrale",
      "info": "Image centrale de la forêt"
    },
    {
      "type": "text",
      "id": "center_image_alt",
      "label": "Texte alternatif - Image centrale",
      "default": "Forêt immersive centre"
    },
    {
      "type": "image_picker",
      "id": "left_image",
      "label": "Image gauche",
      "info": "Image gauche de la forêt"
    },
    {
      "type": "text",
      "id": "left_image_alt",
      "label": "Texte alternatif - Image gauche",
      "default": "Forêt immersive gauche"
    },
    {
      "type": "image_picker",
      "id": "right_image",
      "label": "Image droite",
      "info": "Image droite de la forêt"
    },
    {
      "type": "text",
      "id": "right_image_alt",
      "label": "Texte alternatif - Image droite",
      "default": "Forêt immersive droite"
    },
    {
      "type": "text",
      "id": "title",
      "label": "Titre"
    },
    {
      "type": "textarea",
      "id": "description",
      "label": "Description"
    },
    {
      "type": "text",
      "id": "discord_link",
      "label": "Lien Discord",
      "default": "https://discord.gg/yFWJ8EPb"
    },
    {
      "type": "text",
      "id": "discord_text",
      "label": "Texte du bouton Discord",
      "default": "DISCORD ❯"
    },
    {
      "type": "header",
      "content": "Newsletter"
    },
    {
      "type": "checkbox",
      "id": "show_newsletter",
      "label": "Afficher la newsletter",
      "default": true
    },
    {
      "type": "text",
      "id": "margintop", 
      "label": "Positionnement de la newsletter",
      "info": "en pixels, négatif ou positif"
    },
    {
      "type": "text",
      "id": "newsletter_title",
      "label": "Titre de la newsletter",
      "default": "Rejoignez notre communauté"
    },
    {
      "type": "textarea",
      "id": "newsletter_description",
      "label": "Description de la newsletter",
      "default": "Recevez nos dernières nouvelles et offres exclusives"
    },
    {
      "type": "text",
      "id": "email_placeholder",
      "label": "Placeholder de l'email",
      "default": "Votre adresse e-mail"
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Texte du bouton",
      "default": "S'inscrire"
    },
    {
      "type": "text",
      "id": "success_message",
      "label": "Message de succès",
      "default": "Merci ! Vous êtes inscrit(e) à notre newsletter."
    }
  ],
  "presets": [
    {
      "name": "Forêt Immersive",
      "category": "Custom"
    }
  ]
}
{% endschema %}
